<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ehrenamtsnetz • Gesuche</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="./theme.js" defer></script>
    <script src="./labels.js" defer></script>
    <script src="./nav.js" defer></script>
    <script src="./nav-active.js" defer></script>
    <script src="./data-store.js" defer></script>
    <script src="./session.js" defer></script>
    <script src="./news-controls.js" defer></script>
    <script src="./ui-drawers.js" defer></script>
    <script src="./gesuche-form.js" defer></script>
    <script src="./gesuche-filters.js" defer></script>
  </head>

  <body>
    <header class="header">
      <div class="container header__inner">
        <a class="brand" href="./index.html">Ehrenamtsnetz</a>

        <nav class="nav">
          <div class="nav__links" data-desktop-nav></div>
          <div class="nav__menu">
            <button
              class="nav__toggle"
              type="button"
              aria-label="Menü öffnen"
              aria-expanded="false"
              aria-controls="mobileMenu"
              data-nav-toggle
            >
              <span class="nav__toggleLines" aria-hidden="true">
                <span class="nav__toggleLine"></span>
                <span class="nav__toggleLine"></span>
                <span class="nav__toggleLine"></span>
              </span>
            </button>
            <div class="nav__dropdown" id="mobileMenu" hidden>
              <nav class="nav__dropdownNav" aria-label="Menü" data-mobile-menu></nav>
            </div>
          </div>
          <div class="nav__actions">
            <button class="themeToggle" type="button" aria-label="Dunkelmodus aktivieren" aria-pressed="false" data-theme-toggle>
              <span class="themeToggle__icon themeToggle__icon--sun" aria-hidden="true">
                <svg fill="currentColor" viewBox="144 144 512 512" xmlns="http://www.w3.org/2000/svg">
                  <g>
                    <path d="m549.75 4e2c0 83.094-67.051 150.45-149.75 150.45-82.711.0-149.75-67.355-149.75-150.45.0-83.09 67.043-150.44 149.75-150.44 82.707-.007813 149.75 67.348 149.75 150.44"/>
                    <path d="m603.56 423.2c12.727-5.1641 23.148-9.4102 23.148-9.4453v-.019531l.003907-.027344c0-.03125-9.8281-5.5078-21.855-12.172l-15.773-8.7422c-12.016-6.6641-13.492-19.66-3.2812-28.875l13.371-12.07c10.219-9.2148 18.559-16.785 18.547-16.816-.003906-.03125-11.129-1.8594-24.695-3.9766l-17.766-2.7656c-13.566-2.1172-19.398-13.816-12.949-25.988l8.4023-15.887c6.4375-12.176 11.695-22.168 11.656-22.215-.023438-.039062-11.117 2.0469-24.586 4.7109l-17.574 3.4727c-13.469 2.6641-22.91-6.3242-20.973-19.98l2.5195-17.844c1.9336-13.652 3.4805-24.844 3.4492-24.867-.03125-.019531-9.7422 5.7422-21.496 12.867l-15.355 9.3086c-11.754 7.125-23.711 1.9141-26.555-11.578l-3.7422-17.688c-2.8516-13.492-5.2031-24.535-5.2344-24.547-.035156-.003906-7.1523 8.7656-15.758 19.512l-11.297 14.102c-8.6133 10.742-21.594 9.957-28.852-1.7422l-9.5234-15.367c-7.2539-11.703-13.211-21.27-13.246-21.27-.023437.0-3.75 10.691-8.1914 23.734l-5.8242 17.109c-4.4492 13.047-16.934 16.777-27.75 8.2812l-14.133-11.09c-10.812-8.4961-19.695-15.426-19.73-15.406-.035156.019532.097656 11.352.37891 25.145l.37109 18.012c.28125 13.789-10.168 21.578-23.219 17.305l-17.02-5.5625c-13.047-4.2734-23.758-7.7383-23.789-7.707-.03125.035156 3.9258 10.656 8.8672 23.52l6.4336 16.777c4.9492 12.867-2.2422 23.773-15.957 24.242l-17.961.60547c-13.723.46875-24.965.87109-24.973.90234-.015626.035156 7.3438 8.6133 16.379 19l11.836 13.598c9.0391 10.379 6.0156 23.102-6.7109 28.266l-16.707 6.7812c-12.742 5.1641-23.156 9.418-23.16 9.4492v.042968c-.003906.023438 9.8242 5.5078 21.844 12.172l15.77 8.7422c12.016 6.6641 13.496 19.66 3.2852 28.875l-13.375 12.07c-10.207 9.2148-18.559 16.781-18.551 16.816.011719.035156 11.133 1.8594 24.695 3.9688l17.773 2.7695c13.562 2.1172 19.391 13.816 12.941 25.992l-8.4023 15.879c-6.4453 12.176-11.688 22.168-11.664 22.203.023438.039062 11.125-2.0391 24.59-4.6992l17.566-3.4766c13.469-2.6641 22.91 6.3242 20.973 19.98l-2.5195 17.844c-1.9336-13.648-3.4805-24.844-3.4492-24.867.035156.023437 9.7422-5.7422 21.496-12.867l15.359-9.3086c11.754-7.125 23.699-1.9141 26.551 11.574l-3.75 17.695c2.8477 13.488 5.2109 24.535 5.2344 24.547.03125.0 7.1484-8.7656 15.754-19.52l11.305-14.105c8.6055-10.742 21.59-9.957 28.844 1.75l9.5312 15.359c7.2695 11.723 13.234 21.293 13.262 21.293.03125-.003907 3.75-10.695 8.1875-23.738l5.8359-17.113c4.4375-13.047 16.93-16.781 27.746-8.2812l14.125 11.094c10.816 8.4961 19.703 15.426 19.734 15.406.035157-.015625-.10156-11.348-.38672-25.137l-.36328-18.027c-.28125-13.793 10.16-21.578 23.211-17.305l17.023 5.5703c13.059 4.2656 23.766 7.7383 23.797 7.6992.023438-.03125-3.9297-10.652-8.8672-23.512l-6.4492-16.785c-4.9375-12.863 2.2461-23.773 15.965-24.238l17.973-.60938c13.719-.45703 24.953-.86719 24.973-.90234.011719-.035156-7.3438-8.6094-16.383-18.992l-11.836-13.594c-9.0352-10.387-6.0117-23.109 6.7148-28.273zM390.39 560.19c-88.066-5.332-155.15-81.371-149.84-169.84s80.996-155.86 169.06-150.53c88.066 5.3359 155.14 81.371 149.83 169.84-5.3086 88.473-80.996 155.86-169.05 150.53"/>
                  </g>
                </svg>
              </span>
              <span class="themeToggle__icon themeToggle__icon--moon" aria-hidden="true">
                <svg fill="currentColor" viewBox="144 144 512 512" xmlns="http://www.w3.org/2000/svg">
                  <g fill-rule="evenodd">
                    <path d="m586.16 520.09c-37.855 49.766-97.699 81.895-165.04 81.895-114.46.0-207.27-92.801-207.27-207.27.0-91.602 59.426-169.31 141.82-196.71-121.23 159.34 35.664 386.83 230.49 322.09z"/>
                    <path d="m516.45 388.75 14.566 47.379 47.367 14.559-47.367 14.555-14.566 47.379-14.559-47.379-47.375-14.555 47.375-14.559z"/>
                    <path d="m428.86 287.64 7.293 23.734 23.723 7.2891-23.723 7.2969-7.293 23.723-7.293-23.723-23.727-7.2969 23.727-7.2891z"/>
                    <path d="m416.86 399.47 7.293 23.727 23.727 7.293-23.727 7.2891-7.293 23.727-7.2891-23.727-23.73-7.2891 23.73-7.293z"/>
                  </g>
                </svg>
              </span>
            </button>
          </div>
        </nav>
      </div>
    </header>


    <section class="section section--airy">
      <div class="container">
        <div class="section__header">
          <div></div>
          <div>
            <a class="nav__link" href="./gesuch-erstellen.html">Gesuch erstellen</a>
          </div>
        </div>
        <div class="gesuche__activeFilters">
          <div class="gesuche__tags" id="gesuche-filters"></div>
          <div class="sub gesuche__filterSubtitle" id="gesuche-filter-subtitle">Gefiltert nach: Alle Gesuche</div>
        </div>

        <div class="gesuche__layout">
          <!-- MAIN -->
          <div class="gesuche__main">
            <div class="gesuche__card newsCard" data-news-card>
            <div class="listcardShell">
              <div class="listcard">
                <div class="listcard__header">
                  <button class="newsCard__control listcard__control" type="button" aria-label="Gesuche sortieren" aria-expanded="false" data-open-sort>
                    <span class="newsCard__controlLines" aria-hidden="true">
                      <span class="newsCard__controlLine"></span>
                      <span class="newsCard__controlLine"></span>
                      <span class="newsCard__controlLine"></span>
                    </span>
                  </button>
                  <h1 class="listcard__title" id="gesuche-title">Gesuche</h1>
                  <button class="newsCard__control listcard__control" type="button" aria-label="Gesuche filtern" aria-expanded="false" data-open-filter>
                    <span class="newsCard__controlLines" aria-hidden="true">
                      <span class="newsCard__controlLine"></span>
                      <span class="newsCard__controlLine"></span>
                      <span class="newsCard__controlLine"></span>
                    </span>
                  </button>
                </div>
                <p class="listcard__subtitle" id="gesuche-subtitle">Konkrete Hilfsanfragen – lokal oder online, kurz- oder langfristig.</p>
                <div class="listcard__search">
                  <input class="gesuche__search" placeholder="Suche nach Thema, Ort, Stichwort…" data-gesuche-search />
                  <button class="nav__link gesuche__searchBtn" type="button" data-gesuche-search-btn>Suchen</button>
                </div>
              </div>
              <div class="listcard__drawer" data-drawer="sort" hidden>
                <div class="newsCard__menu" data-news-menu="sort" role="menu" aria-label="Sortierung">
                  <div class="newsCard__menuLabel">Sortieren nach</div>
                  <div class="newsCard__menuDivider" aria-hidden="true"></div>
                  <button class="newsCard__menuItem is-active" type="button" data-news-sort="newest">Neueste zuerst</button>
                  <button class="newsCard__menuItem" type="button" data-news-sort="oldest">Älteste zuerst</button>
                  <button class="newsCard__menuItem" type="button" data-news-sort="distance">Entfernung</button>
                </div>
              </div>
              <div class="listcard__drawer" data-drawer="filter" hidden>
                <div class="listcard__drawerSection">
                  <div class="listcard__drawerTitle">Filter</div>
                  <select class="gesuche__select" aria-label="Gesuchstyp auswählen" data-gesuche-type-filter>
                    <option value="all">Alle Typen</option>
                    <option value="fsj">FSJ</option>
                    <option value="pflegestelle">Pflegestelle</option>
                    <option value="urlaub">Urlaub</option>
                    <option value="aushilfe">Aushilfe</option>
                    <option value="mitglied">Mitglied</option>
                    <option value="freiwillig">Freiwillig</option>
                  </select>
                </div>
                <div class="newsCard__menu" data-news-menu="filter" role="menu" aria-label="Filter">
                  <div class="newsCard__menuLabel">Filtern nach</div>
                  <div class="newsCard__menuDivider" aria-hidden="true"></div>
                  <button class="newsCard__menuItem is-active" type="button" data-news-filter="all">Alle</button>
                  <button class="newsCard__menuItem" type="button" data-news-filter="vor_ort">Vor Ort</button>
                  <button class="newsCard__menuItem" type="button" data-news-filter="online">Online</button>
                  <button class="newsCard__menuItem" type="button" data-news-filter="hybrid">Hybrid</button>
                </div>
                <button class="gesuche__clear" type="button" data-gesuche-clear-filters>Filter zurücksetzen</button>
              </div>
            </div>

              <div class="gesuche__list" data-gesuche-list data-news-list>
                <!-- Gesuch row 1 -->
                <article
                  class="gesuche__row"
                  data-news-item
                  data-news-type="vor_ort"
                  data-gesuch-type="aushilfe"
                  data-news-date="2024-06-02"
                  data-news-distance="2"
                  data-verein-name="Seniorenhilfe Berlin e.V."
                  data-verein-address="Kastanienallee 14, 10435 Berlin"
                  data-verein-email="kontakt@seniorenhilfe-berlin.de"
                  data-verein-phone="+49 30 234567-0"
                  data-verein-contact="Maren Hoffmann"
                  data-verein-email-visible="true"
                  data-verein-phone-visible="false"
                >
                  <div class="gesuche__media" aria-hidden="true"></div>
                  <div class="gesuche__left">
                    <h3 class="gesuche__title">Begleitung zum Arzt gesucht</h3>
                    <div class="gesuche__meta">Berlin • 2 km • 30–90 Min • Vor Ort</div>

                    <div class="gesuche__tags">
                      <span class="gesuche__tag">Ältere</span>
                      <span class="gesuche__tag">Begleitung</span>
                      <span class="gesuche__tag">Kurzfristig</span>
                    </div>

                    <div class="gesuche__text">
                      Kurzer Teaser: Worum geht es? Was ist wichtig? Welche Zeiten? Was sollte man mitbringen?
                    </div>
                  </div>

                  <div class="gesuche__right">
                    <button class="nav__link gesuche__open" type="button">Öffnen</button>
                    <button class="nav__link gesuche__save" type="button">Merken</button>
                  </div>
                </article>

                <!-- Gesuch row 2 -->
                <article
                  class="gesuche__row"
                  data-news-item
                  data-news-type="online"
                  data-gesuch-type="freiwillig"
                  data-news-date="2024-05-24"
                  data-news-distance="0"
                  data-verein-name="Lernbrücke Online"
                  data-verein-address="Digitale Beratung, Berlin"
                  data-verein-email="team@lernbruecke-online.de"
                  data-verein-phone="+49 30 987654-0"
                  data-verein-contact="Said Yilmaz"
                  data-verein-email-visible="true"
                  data-verein-phone-visible="true"
                >
                  <div class="gesuche__media" aria-hidden="true"></div>
                  <div class="gesuche__left">
                    <h3 class="gesuche__title">Online Nachhilfe (Mathe) für Schüler</h3>
                    <div class="gesuche__meta">Online • flexibel • 1–2 Std/Woche</div>

                    <div class="gesuche__tags">
                      <span class="gesuche__tag">Kinder</span>
                      <span class="gesuche__tag">Online</span>
                      <span class="gesuche__tag">Wissen</span>
                    </div>

                    <div class="gesuche__text">
                      Kurzer Teaser: Zielgruppe, Zeitslots, Level und gewünschte Skills.
                    </div>
                  </div>

                  <div class="gesuche__right">
                    <button class="nav__link gesuche__open" type="button">Öffnen</button>
                    <button class="nav__link gesuche__save" type="button">Merken</button>
                  </div>
                </article>

                <!-- Gesuch row 3 -->
                <article
                  class="gesuche__row"
                  data-news-item
                  data-news-type="vor_ort"
                  data-gesuch-type="pflegestelle"
                  data-news-date="2024-05-18"
                  data-news-distance="5"
                  data-verein-name="Tierfreunde Hamburg"
                  data-verein-address="Barkhausenweg 2, 22339 Hamburg"
                  data-verein-email="kontakt@tierfreunde-hh.de"
                  data-verein-phone="+49 40 555123-0"
                  data-verein-contact="Lina Vogt"
                  data-verein-email-visible="false"
                  data-verein-phone-visible="true"
                >
                  <div class="gesuche__media" aria-hidden="true"></div>
                  <div class="gesuche__left">
                    <h3 class="gesuche__title">Hilfe im Tierheim am Wochenende</h3>
                    <div class="gesuche__meta">Hamburg • 5 km • halber Tag • Vor Ort</div>

                    <div class="gesuche__tags">
                      <span class="gesuche__tag">Tiere</span>
                      <span class="gesuche__tag">Wochenende</span>
                      <span class="gesuche__tag">Vor Ort</span>
                    </div>

                    <div class="gesuche__text">
                      Kurzer Teaser: Aufgaben (Füttern, Reinigen, Spaziergänge), Kleidung, Treffpunkt.
                    </div>
                  </div>

                  <div class="gesuche__right">
                    <button class="nav__link gesuche__open" type="button">Öffnen</button>
                    <button class="nav__link gesuche__save" type="button">Merken</button>
                  </div>
                </article>

                <!-- More placeholders -->
                <article
                  class="gesuche__row"
                  data-news-item
                  data-news-type="vor_ort"
                  data-gesuch-type="fsj"
                  data-news-date="2024-05-12"
                  data-news-distance="4"
                  data-verein-name="Nachbarschaftshaus Nord"
                  data-verein-address="Nordplatz 5, 30159 Hannover"
                  data-verein-email="info@nachbarschaft-nord.de"
                  data-verein-phone="+49 511 780900"
                  data-verein-contact=""
                  data-verein-email-visible="true"
                  data-verein-phone-visible="false"
                >
                  <div class="gesuche__media" aria-hidden="true"></div>
                  <div class="gesuche__left">
                    <h3 class="gesuche__title">FSJ im Nachbarschaftshaus</h3>
                    <div class="gesuche__meta">Hannover • 4 km • FSJ • Vor Ort</div>
                    <div class="gesuche__tags">
                      <span class="gesuche__tag">FSJ</span>
                      <span class="gesuche__tag">Langfristig</span>
                      <span class="gesuche__tag">Vor Ort</span>
                    </div>
                    <div class="gesuche__text">
                      Langfristige Unterstützung im Quartierstreff: Planung, Begleitung von Angeboten und Hilfe im Alltag.
                    </div>
                  </div>
                  <div class="gesuche__right">
                    <button class="nav__link gesuche__open" type="button">Öffnen</button>
                    <button class="nav__link gesuche__save" type="button">Merken</button>
                  </div>
                </article>
              </div>

              <div class="gesuche__more">
                <button class="nav__link gesuche__moreBtn" type="button">Weitere…</button>
              </div>
            </div>
          </div>

          <!-- SIDEBAR -->
          <aside class="gesuche__sidebar">
            <div class="gesuche__sideTitle">Filter</div>
            <details class="gesuche__filterPanel">
              <summary>Filter anzeigen</summary>
              <div class="gesuche__filterPanelBody">
                <details class="gesuche__filter" open>
                  <summary>Themengebiet</summary>
                  <div class="gesuche__filterBody">
                    <label class="gesuche__chk"><input type="checkbox" /> Kinder</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Geflüchtete</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Inklusiv</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Ältere</label>

                    <div class="gesuche__sep"></div>

                    <label class="gesuche__chk"><input type="checkbox" /> Tiere</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Natur</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Sport</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Kreativ</label>
                  </div>
                </details>

                <details class="gesuche__filter">
                  <summary>Ort</summary>
                  <div class="gesuche__filterBody">
                    <label class="gesuche__chk"><input type="checkbox" /> In der Nähe</label>
                    <label class="gesuche__chk"><input type="checkbox" /> In Deutschland</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Im Ausland</label>
                  </div>
                </details>

                <details class="gesuche__filter">
                  <summary>Modus</summary>
                  <div class="gesuche__filterBody">
                    <label class="gesuche__chk"><input type="checkbox" /> Online</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Vor Ort</label>
                  </div>
                </details>

                <details class="gesuche__filter">
                  <summary>Aufwand</summary>
                  <div class="gesuche__filterBody">
                    <label class="gesuche__chk"><input type="checkbox" /> kurzfristig (3–30 Min)</label>
                    <label class="gesuche__chk"><input type="checkbox" /> mittelfristig (halber Tag)</label>
                    <label class="gesuche__chk"><input type="checkbox" /> langfristig (mehrere Tage)</label>
                    <label class="gesuche__chk"><input type="checkbox" /> FSJ o.ä.</label>
                  </div>
                </details>

                <details class="gesuche__filter">
                  <summary>Rahmen</summary>
                  <div class="gesuche__filterBody">
                    <label class="gesuche__chk"><input type="checkbox" /> Mit ÖPNV erreichbar</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Geld (Aufwandsentschädigung)</label>
                    <label class="gesuche__chk"><input type="checkbox" /> Barrierefrei</label>
                  </div>
                </details>

                <div class="gesuche__sideActions">
                  <button class="nav__link gesuche__apply" type="button">Anwenden</button>
                  <button class="nav__link gesuche__reset" type="button">Zurücksetzen</button>
                </div>
              </div>
            </details>
          </aside>
        </div>
      </div>
    </section>

    <div class="gesuchDetail" data-gesuch-detail hidden>
      <div class="gesuchDetail__overlay" data-gesuch-detail-close></div>
      <div class="gesuchDetail__panel" role="dialog" aria-modal="true" aria-labelledby="gesuch-detail-title">
        <button class="gesuchDetail__close" type="button" data-gesuch-detail-close>Schließen</button>
        <div class="gesuchDetail__content">
          <div class="gesuchDetail__meta" data-gesuch-detail-meta></div>
          <h2 class="h2" id="gesuch-detail-title" data-gesuch-detail-title></h2>
          <p class="gesuchDetail__summary" data-gesuch-detail-summary></p>

          <div class="gesuchDetail__section">
            <h3 class="h3">Verein</h3>
            <div class="gesuchDetail__verein" data-gesuch-detail-verein></div>
            <div class="gesuchDetail__address" data-gesuch-detail-address></div>
            <div class="gesuchDetail__contact">
              <div class="gesuchDetail__contactLead" data-gesuch-detail-contact-person></div>
              <div class="gesuchDetail__contactRow" data-gesuch-detail-email></div>
              <div class="gesuchDetail__contactRow" data-gesuch-detail-phone></div>
            </div>
            <div class="gesuchDetail__note" data-gesuch-detail-note></div>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="container footer__inner">
        <div>Impressum • Kontakt • Datenschutz</div>
      </div>
    </footer>

    <script>
      (function () {
        const filterContainer = document.getElementById("gesuche-filters");
        const filterSubtitle = document.getElementById("gesuche-filter-subtitle");
        const subtitle = document.getElementById("gesuche-subtitle");
        if (!filterContainer || !filterSubtitle) return;

        const params = new URLSearchParams(window.location.search);
        const path = params.get("path");
        const mode = params.get("mode");
        const role = params.get("role");
        const topic = params.get("topic");
        const type = params.get("type");

        const labelMap = {
          path: "Bereich",
          mode: "Modus",
          role: "Rolle",
          topic: "Thema",
          type: "Typ",
        };

        const formatValue = (value) =>
          value
            .split(/[-_]/)
            .map((part) => part.charAt(0).toUpperCase() + part.slice(1))
            .join(" ");

        const filterChips = [];
        if (path) filterChips.push(`${labelMap.path}: ${formatValue(path)}`);
        if (mode) filterChips.push(`${labelMap.mode}: ${formatValue(mode)}`);
        if (role) filterChips.push(`${labelMap.role}: ${formatValue(role)}`);
        if (topic) filterChips.push(`${labelMap.topic}: ${formatValue(topic)}`);
        if (type) filterChips.push(`${labelMap.type}: ${formatValue(type)}`);

        if (filterChips.length) {
          filterContainer.innerHTML = "";
          filterChips.forEach((label) => {
            const chip = document.createElement("span");
            chip.className = "gesuche__tag";
            chip.textContent = label;
            filterContainer.appendChild(chip);
          });

          const summaryText = `Gefiltert nach: ${filterChips.join(" · ")}`;
          filterSubtitle.textContent = summaryText;
          if (subtitle) subtitle.textContent = summaryText;
        } else {
          filterContainer.innerHTML = "";
          filterSubtitle.textContent = "Gefiltert nach: Alle Gesuche";
        }
      })();
    </script>
  </body>
</html>
